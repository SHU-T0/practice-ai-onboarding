---
title: "Day 2: UIと状態管理"
order: 3
category: "day"
description: "state（状態）の概念を理解し、インタラクティブなアプリが作れる"
---

# Day 2: UIと状態管理

## ゴール

state（状態）の概念を理解し、インタラクティブなアプリが作れる

> **テンプレートについて**: Day 2-3では学習のシンプルさを優先して `npx create-expo-app --template blank-typescript`（App.tsxベース）を使用します。Day 4以降でExpo Router構成（`app/index.tsx`ベース）に移行します。スタータープロジェクト（`templates/expo-starter/`）はDay 4以降で使用してください。

## 新概念（2つに絞る）

1. **State（状態）**: アプリが覚えている情報
2. **リスト表示**: 複数のデータを一覧で表示

## タイムテーブル

| 時間 | 内容 | 形式 | 所要 |
|------|------|------|------|
| 9:00-9:15 | 朝の復習: 昨日のアプリをゼロから再構築 | 個人 | 15分 |
| 9:15-9:45 | ミニ座学: 「アプリ=画面+データ+操作」。stateの概念 | 全体 | 30分 |
| 9:45-10:45 | カウンターアプリ制作（ボタンでstate変更） | 全体→個人 | 60分 |
| 10:45-11:00 | 休憩 | - | 15分 |
| 11:00-12:00 | カウンターアプリの発展: リセット、カラー変更等 | 個人(講師巡回) | 60分 |
| 12:00-13:00 | 昼休み | - | 60分 |
| 13:00-13:15 | ミニ座学: エラーの読み方 | 全体 | 15分 |
| 13:15-14:30 | ToDoリストアプリ制作（追加・削除・完了トグル） | 全体→個人 | 75分 |
| 14:30-14:45 | 休憩 | - | 15分 |
| 14:45-15:30 | ToDoアプリを自分好みにカスタマイズ | 個人(講師巡回) | 45分 |
| 15:30-16:00 | 成果発表 + 振り返り | 全体 | 30分 |

## セッション詳細

### 9:00-9:15 朝の復習: 昨日のアプリをゼロから再構築

#### 講師向けメモ

- 前日の記憶が新しいうちに復習
- 自力でできるか確認
- できない人は放置せず個別サポート

#### 受講者配布用手順

**課題: 昨日のアプリを思い出しながら作り直す**

1. 新しいプロジェクトを作成:

```bash
cd ~/Documents
npx create-expo-app@latest day2-practice --template blank-typescript
cd day2-practice
```

> **注意**: `--template blank-typescript` オプションはExpo SDKのバージョンによって変更される場合があります。研修実施前に `npx create-expo-app@latest --help` で利用可能なテンプレートを確認してください。最新版では `--template blank-typescript` が不要（デフォルトでTypeScript対応）になっている場合があります。

2. Cursorで開く

3. Composerで指示:

```
App.tsxを編集して、以下のアプリを作ってください:
- ボタンを配置
- ボタンを押すと「[好きな言葉]」を表示
- 背景色とボタンの色をカスタマイズ
```

4. シミュレータで確認

**目標時間**: 10分以内に完成

#### 完了チェックポイント

- [ ] 自力でプロジェクト作成できた
- [ ] Composerで指示を出せた
- [ ] シミュレータで動作確認できた

---

### 9:15-9:45 ミニ座学: stateの概念

#### 講師向けメモ

- 専門用語を避け、身近な例えで説明
- 図を使って視覚的に理解させる
- 「なぜstateが必要か」を強調

#### 受講者配布用資料

**アプリの3要素**

```
┌─────────────────────────────────┐
│          アプリ                  │
│  ┌─────────────────────┐        │
│  │  1. 画面（UI）       │        │
│  │  ユーザーが見る部分   │        │
│  └─────────────────────┘        │
│            ↕                    │
│  ┌─────────────────────┐        │
│  │  2. データ（State）  │        │
│  │  アプリが覚えている情報│        │
│  └─────────────────────┘        │
│            ↕                    │
│  ┌─────────────────────┐        │
│  │  3. 操作（イベント）  │        │
│  │  ボタン押下、入力等   │        │
│  └─────────────────────┘        │
└─────────────────────────────────┘
```

**Stateを顧客リストに例えると**

営業の顧客リストExcelを想像してください:

| 概念 | 顧客リストExcel | アプリ |
|------|----------------|--------|
| **データ** | セルに入力した顧客情報 | State（状態） |
| **表示** | 画面に表示されている表 | UI（画面） |
| **更新** | セルを編集 | setState（状態の変更） |
| **再計算** | 関数が自動で再計算 | 画面が自動で更新 |

**Stateの例**

| アプリ | State（覚えている情報） |
|--------|----------------------|
| カウンターアプリ | 現在の数字（例: 5） |
| ToDoアプリ | ToDoリスト（例: ["買い物", "メール返信"]） |
| ログインアプリ | ログイン中のユーザー情報 |

**Stateがない場合の問題**

ボタンを押しても何も起きない:

```
ボタンを押す
→ 何も記憶しない
→ 画面は変わらない
```

Stateがある場合:

```
ボタンを押す
→ Stateが変わる（例: 0 → 1）
→ 画面が自動で更新される
```

**React Nativeでのstate**

```typescript
// カウンターの例
const [count, setCount] = useState(0);
//      ↑       ↑          ↑
//   現在の値  変更する関数  初期値

// ボタンを押したら
setCount(count + 1);  // 1増やす
```

これを覚える必要はありません。AIがこの形で書いてくれます。
皆さんは「stateとは、アプリが覚えている情報」と理解すればOKです。

#### 完了チェックポイント

- [ ] stateの概念を理解した
- [ ] なぜstateが必要かを理解した
- [ ] 身近な例えで説明できる

---

### 9:45-10:45 カウンターアプリ制作

#### 講師向けメモ

- **最初の30分**: 講師が画面共有でデモ。受講者も同じ操作
- **次の30分**: 受講者が自力で作り直す
- stateの理解が最重要。焦らず丁寧に

#### 受講者配布用手順

**カウンターアプリの要件**

- 画面に数字を表示（初期値: 0）
- 「+1」ボタンを押すと数字が1増える
- 「-1」ボタンを押すと数字が1減る

**ステップ1: プロジェクト作成**

```bash
cd ~/Documents
npx create-expo-app@latest counter-app --template blank-typescript
cd counter-app
```

> **エラーが出た場合**: `--template blank-typescript` の部分を削除して、`npx create-expo-app@latest counter-app` だけで再実行してください。テンプレートの名前はExpoのバージョンによって変わることがあります。

Cursorで開く。

**ステップ2: Composerで基本機能を作成**

Cmd+IでComposerを開き、以下を入力:

```
App.tsxを編集して、カウンターアプリを作ってください。

要件:
1. 画面中央に数字を大きく表示（初期値: 0）
2. 数字の下に「+1」ボタンと「-1」ボタンを横並びで配置
3. 「+1」を押すと数字が1増える
4. 「-1」を押すと数字が1減る
5. 背景色は薄い灰色

TypeScriptとReact Nativeで実装してください。
useStateを使ってください。
```

**ステップ3: シミュレータで確認**

```bash
npx expo start
# 「i」を押してiOS Simulatorで起動
```

動作確認:
- [ ] 数字が0で表示される
- [ ] +1ボタンで数字が増える
- [ ] -1ボタンで数字が減る

**ステップ4: コードの確認**

> **参考（読み飛ばしてOK）**: 以下はAIが書いたコードの中身です。理解する必要はありませんが、興味がある人は読んでみてください。

App.tsxを開いて、stateの部分を見てみましょう:

```typescript
const [count, setCount] = useState(0);
```

これが「アプリが0という数字を覚えている」部分です。

**ステップ5: AIに質問**

Chatで質問してみましょう:

```
このアプリのstateについて説明してください。
countとsetCountは何をしていますか?
```

#### トラブルシューティング

**ボタンを押しても数字が変わらない**

→ Chatに質問:
```
ボタンを押しても数字が変わりません。
以下のコードを見て、問題を教えてください。

[App.tsxの内容を貼り付け]
```

**エラーが出る**

→ エラーメッセージをコピーしてChatに貼り付け

#### 完了チェックポイント

- [ ] カウンターアプリが動作している
- [ ] +1、-1ボタンが正しく機能する
- [ ] stateの場所をコードで確認した
- [ ] AIに質問してstateについて理解を深めた

---

### 11:00-12:00 カウンターアプリの発展

#### 講師向けメモ

- 受講者が自律的に作業
- 講師は巡回サポート
- 「AI→ペア→講師」の順番を守らせる

#### 受講者配布用手順

**基本課題: 以下の機能を追加**

1. **リセットボタン**: 数字を0に戻す
2. **+10ボタン**: 一度に10増やす
3. **カラー変更**: 数字が正の数の時は青、負の数の時は赤で表示

**Composerへのプロンプト例**:

```
現在のカウンターアプリに、以下の機能を追加してください:

1. 「リセット」ボタンを追加。押すと数字が0に戻る
2. 「+10」ボタンを追加。押すと数字が10増える
3. 数字の色を変更:
   - 正の数の時: 青
   - 負の数の時: 赤
   - 0の時: 黒

既存のコードを壊さずに追加してください。
```

**発展課題（早く終わった人向け）**:

4. **倍増ボタン**: 現在の数字を2倍にする
5. **履歴表示**: 過去5回の操作履歴を表示
6. **アニメーション**: 数字が変わる時にアニメーション効果

**プロンプト例（倍増ボタン）**:

```
「×2」ボタンを追加してください。
押すと現在の数字が2倍になります。
既存のボタンと同じデザインで、一番下に配置してください。
```

#### ヒント

- 機能を1つずつ追加する（一度に全部やらない）
- 各機能追加後、必ずシミュレータで確認
- エラーが出たらChatに質問
- 隣の人と進捗を共有

#### 完了チェックポイント

- [ ] リセットボタンが動作する
- [ ] +10ボタンが動作する
- [ ] 数字の色が条件によって変わる
- [ ] （発展課題）追加機能が実装できた

---

### 13:00-13:15 ミニ座学: エラーの読み方

#### 講師向けメモ

- エラーを恐れない文化を作る
- 「エラー = 会話のきっかけ」を強調
- 実際のエラー例を見せる

#### 受講者配布用資料

**エラーは怖くない**

エラーは「失敗」ではなく、AIとの会話のきっかけです。

**エラーの読み方 3ステップ**

1. **赤文字の最後の行を読む**

```
Error: Cannot find module 'react-native'
      ↑
   これが原因
```

2. **エラーメッセージをコピー**

全部コピーする必要はありません。最後の数行でOK。

3. **Chatに貼り付けて質問**

```
以下のエラーが出ました。解決方法を教えてください。

[エラーメッセージ]
```

**よくあるエラーと対処法**

| エラーメッセージ | 原因 | 対処法 |
|-----------------|------|--------|
| `Cannot find module` | パッケージ未インストール | `npm install` を実行 |
| `Unexpected token` | 構文エラー（カッコ閉じ忘れ等） | AIに修正を依頼 |
| `undefined is not an object` | 変数が存在しない | Chatで原因を聞く |
| シミュレータが真っ白 | アプリクラッシュ | ターミナルのエラーを確認 |

**console.logでデバッグ**

「今、どんな値になっているか」を確認する方法:

```typescript
console.log('現在のカウント:', count);
```

これをコードに入れると、ターミナルに値が表示されます。

**AIへの質問の仕方**

悪い例:
```
エラーです
```

良い例:
```
以下のエラーが出ました。どこを修正すればいいですか?

エラーメッセージ:
[具体的なエラー]

私がやろうとしていたこと:
リセットボタンを追加しようとしていました

関連するコード:
[該当部分のコード]
```

#### 完了チェックポイント

- [ ] エラーメッセージの読み方を理解した
- [ ] Chatでのエラーの質問方法を理解した
- [ ] console.logの使い方を知った

---

### 13:15-14:30 ToDoリストアプリ制作

#### 講師向けメモ

- stateが配列になる（より複雑）
- **最初の45分**: 講師がデモ。受講者も同じ操作
- **次の30分**: 受講者が自力で作り直す
- 理解度にばらつきが出やすいので、丁寧に

#### 受講者配布用手順

**ToDoリストアプリの要件**

- ToDoを追加できる
- ToDoを削除できる
- ToDoを完了/未完了で切り替えられる

**ステップ1: プロジェクト作成**

```bash
cd ~/Documents
npx create-expo-app@latest todo-app --template blank-typescript
cd todo-app
```

Cursorで開く。

**ステップ2: Composerで基本機能を作成**

Cmd+IでComposerを開き、以下を入力:

```
App.tsxを編集して、ToDoリストアプリを作ってください。

要件:
1. 上部にテキスト入力欄と「追加」ボタンを配置
2. 入力欄にToDoを入力して「追加」を押すと、リストに追加される
3. ToDoリストを表示（各ToDoに「削除」ボタンを付ける）
4. ToDoをタップすると、完了/未完了を切り替え（完了したら取り消し線）
5. 背景は白、ToDoは薄い灰色の背景で表示

TypeScriptとReact Nativeで実装してください。
useStateを使って、ToDoリストを配列で管理してください。
```

> 「配列」「useState」等の技術用語はAIへの指示語です。そのままコピペしてください。

**ステップ3: シミュレータで確認**

```bash
npx expo start
```

動作確認:
- [ ] ToDoを追加できる
- [ ] ToDoをタップすると取り消し線が付く
- [ ] 削除ボタンでToDoが消える

**ステップ4: コードの確認**

> **参考（読み飛ばしてOK）**: 以下はAIが書いたコードの中身です。理解する必要はありませんが、興味がある人は読んでみてください。

App.tsxを開いて、stateの部分を見てみましょう:

```typescript
const [todos, setTodos] = useState<string[]>([]);
```

これが「ToDoのリスト（配列）を覚えている」部分です。

**カウンターとの違い**

| カウンター | ToDoリスト |
|-----------|-----------|
| `useState(0)` | `useState([])` |
| 数字1つ | 配列（複数のデータ） |
| `setCount(count + 1)` | `setTodos([...todos, newTodo])` |

**ステップ5: AIに質問**

Chatで質問:

```
このToDoアプリで、新しいToDoを追加する処理を説明してください。
配列のstateはどう更新していますか?
```

#### トラブルシューティング

**ToDoが追加されない**

→ Chatに質問:
```
ToDoを追加しても画面に表示されません。
以下のコードを確認してください。

[App.tsxの該当部分]
```

**削除ボタンが動かない**

→ console.logで確認:
```typescript
const handleDelete = (index: number) => {
  console.log('削除するインデックス:', index);
  // 削除処理
};
```

#### 完了チェックポイント

- [ ] ToDoアプリが動作している
- [ ] ToDo追加・削除・完了トグルが機能する
- [ ] 配列のstateを確認した
- [ ] カウンターとの違いを理解した

---

### 14:45-15:30 ToDoアプリを自分好みにカスタマイズ

#### 講師向けメモ

- 受講者の創造性を引き出す
- 自由度を高めて、楽しませる
- 技術的な挑戦を促す

#### 受講者配布用手順

**課題: ToDoアプリを自分好みにカスタマイズ**

以下から好きなものを選んで実装してください（複数可）:

**デザイン系**

1. **カラーテーマ変更**: 好きな色に
2. **アイコン追加**: 削除ボタンに✕アイコン、完了に✓アイコン
3. **アニメーション**: ToDo追加時にフェードイン

**機能系**

4. **編集機能**: ToDoをタップして編集
5. **優先度**: 高・中・低の優先度を設定
6. **期限**: 各ToDoに期限を設定
7. **フィルター**: 完了/未完了で絞り込み

**発展系**

8. **カテゴリー**: ToDoをカテゴリー分け（仕事/プライベート等）
9. **検索**: ToDoを検索
10. **統計**: 完了率を表示

**プロンプト例（カラーテーマ変更）**:

```
現在のToDoアプリのデザインを以下のように変更してください:

- 背景色: 濃い青（#1E3A8A）
- ToDoカード: 白
- 完了したToDoカード: 薄い灰色
- ボタン: オレンジ色
- 文字: 見やすいサイズに

既存の機能を壊さずに、デザインだけを変更してください。
```

**プロンプト例（編集機能）**:

```
ToDoをタップしたら編集できるようにしてください。

動作:
1. ToDoをタップすると、入力欄にそのToDoのテキストが表示される
2. 入力欄を編集して「更新」ボタンを押すと、ToDoが更新される
3. 通常時は「追加」ボタン、編集時は「更新」ボタンを表示

既存の追加・削除機能は維持してください。
```

#### ヒント

- 1つずつ実装して、都度確認
- 欲張らず、できる範囲で
- 他の人のアイデアも参考にする
- 詰まったらペアに相談

#### 完了チェックポイント

- [ ] 1つ以上のカスタマイズを実装した
- [ ] オリジナリティを出せた
- [ ] 既存機能が壊れていない

---

### 15:30-16:00 成果発表 + 振り返り

#### 講師向けメモ

- 各自の工夫を称賛
- 学び合いの場にする
- Day 2の達成感を共有

#### 発表フォーマット

各受講者が発表（5分/人）:

1. **作ったアプリのデモ**（2分）
   - ToDoの追加・削除・完了を実演
   - カスタマイズした部分を紹介

2. **工夫した点**（2分）
   - どんな機能を追加したか
   - どんなデザインにしたか

3. **学びと苦労**（1分）
   - stateについて理解できたこと
   - 苦労したエラーと解決方法

#### 講師のフィードバック

- 具体的に褒める（「このデザインが見やすい」等）
- 技術的なポイントを補足（「ここでstateを使っている」等）
- 他の受講者への学びにつなげる

#### Slack振り返り投稿

```
【Day 2 振り返り】

## 今日学んだこと
- stateの概念
- カウンターアプリでのstate管理
- ToDoリストでの配列state

## 作ったもの
- カウンターアプリ（+1/-1/リセット）
- ToDoリストアプリ（追加・削除・完了）
[スクリーンショットを添付]

## カスタマイズした内容
-

## 苦労した点・解決方法
-

## 明日への意気込み
-
```

#### 完了チェックポイント

- [ ] 全員が発表した
- [ ] お互いのアプリから学んだ
- [ ] stateの理解が深まった
- [ ] Slackに投稿した

---

## 講師向け: Day 2の成功基準

### 最重要: 全員がこれを達成していること

- [ ] stateが「アプリが覚えている情報」と理解している
- [ ] カウンターアプリでstateを変更できた
- [ ] ToDoリストアプリで配列のstateを操作できた
- [ ] 自分でカスタマイズを1つ以上実装できた

### 理解度の確認質問

受講者に聞いてみてください:

1. 「stateとは何ですか?」
   → 「アプリが覚えている情報」と答えられればOK

2. 「ボタンを押した時、なぜ画面が更新されますか?」
   → 「stateが変わるから」と答えられればOK

3. 「ToDoリストのstateは、カウンターと何が違いますか?」
   → 「配列になっている」と答えられればOK

### Day 3への準備

- [ ] 全員がToDoアプリを完成させた
- [ ] エラーの読み方・解決方法を習得した
- [ ] 明日のSupabase接続への心の準備ができた

---

## 補足資料

> **このセクションは講師用の参考資料です。** 受講者は読む必要はありません。AIが生成するコードの確認用として使います。

### stateに関するよくある質問

**Q: stateとpropsの違いは何ですか?**

A: 今はstateだけ理解すればOKです。propsは後で学びます。

**Q: useStateの書き方を覚える必要がありますか?**

A: いいえ。AIが書いてくれます。皆さんは「ここにstateがある」と分かればOKです。

**Q: 複雑なstateはどう管理しますか?**

A: 今は配列までで十分です。もっと複雑なstateは、後で必要になったら学びます。

### 配列操作の基本

ToDoアプリで使った配列操作:

```typescript
// 追加
setTodos([...todos, newTodo]);

// 削除
setTodos(todos.filter((_, index) => index !== deleteIndex));

// 更新
setTodos(todos.map((todo, index) =>
  index === updateIndex ? updatedTodo : todo
));
```

これを覚える必要はありません。AIに「追加して」「削除して」「更新して」と指示すればOKです。

### 次のステップ

明日（Day 3）はSupabaseを使って、データをサーバーに保存します。
今日学んだstateは、Supabaseから取得したデータを管理するのに使います。

お疲れさまでした!

---

## 講師用チェックリスト

### Day 2開始前

- [ ] スライド資料（state概念、エラーの読み方）
- [ ] カウンターアプリの完成形
- [ ] ToDoアプリの完成形
- [ ] トラブルシューティングガイド更新

### 各セッション

- [ ] 9:45-10:45 カウンターアプリデモの準備
- [ ] 13:15-14:30 ToDoアプリデモの準備
- [ ] タイマー管理
- [ ] 受講者の進捗確認（巡回）

### Day 2終了時

- [ ] 全員のSlack投稿確認
- [ ] stateの理解度チェック
- [ ] 遅れている人のフォローアップ
- [ ] Day 3の準備（Supabaseプロジェクト確認）

明日はいよいよバックエンドに接続します。頑張りましょう!
