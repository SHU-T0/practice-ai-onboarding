# CursorのAI設定ガイド — モデル・Rules・Agent・MCP

## この文書の目的

Cursorは単なるコードエディタではなく、AIの挙動を細かくカスタマイズできるツールです。
このガイドでは、研修で使う4つの重要な設定を解説します。

> **研修での位置づけ**: Day 1午後のCursorデモで概要を紹介し、Day 2以降は講師が設定済みの状態で使います。受講者自身が設定する必要はありませんが、「なぜAIがうまく動くか」の裏側を知っておくと、今後自走する際に役立ちます。

---

## 1. モデル選択（どのAIを使うか）

### 概念

Cursorの中では、複数のAIモデルを切り替えて使えます。
モデルごとに「得意なこと」が違います。

### 主なモデルと使い分け

| モデル | 特徴 | 向いている場面 |
|--------|------|---------------|
| **Claude Sonnet** | コーディングに強い。バランスが良い | 日常的な開発作業全般（研修のメイン） |
| **Claude Opus** | 最も深い推論力。複雑な問題に強い | 難しいバグの調査、設計判断 |
| **GPT-4o** | OpenAI製。幅広い知識 | 一般的な質問、別の視点が欲しい時 |
| **Claude Haiku** | 高速・低コスト | 簡単な質問、コード補完 |

### 設定方法

1. Cmd+L（チャット）または Cmd+I（Composer）を開く
2. 入力欄の左にあるモデル名をクリック
3. 使いたいモデルを選択

```
研修では「Claude Sonnet」を標準で使います。
迷ったらそのままでOKです。
```

### 設定前後の違い

| 設定前（デフォルト） | 設定後（適切なモデル選択） |
|-------------------|----------------------|
| AIの回答品質にばらつき | 用途に合った回答が得られる |
| 速度と品質のバランスが不明 | 簡単な作業は高速モデル、複雑な作業は高性能モデルと使い分け |

---

## 2. Rules（AIへのルール設定）

### 概念

Rulesとは、AIに対して「このプロジェクトではこう振る舞ってほしい」というルールを事前に設定する仕組みです。

**営業に例えると**:
新しい営業担当にクライアントを引き継ぐとき、「この会社には敬語で」「この業界用語を使って」と事前に伝えるのと同じです。Rulesを設定すると、AIが毎回の会話でそのルールに従ってくれます。

### 設定方法（Cursor Settings から GUI で設定）

**研修ではこの方法を使います。** ファイル操作が不要で、画面上でコピー＆ペーストするだけです。

1. `Cmd + ,` でCursor Settingsを開く
2. 左メニューから「Rules」を選択
3. 「User Rules」のテキストボックスにルールを入力

#### 研修で使うルール（講師がDay 1で全員に設定させる）

以下をコピーして「User Rules」に貼り付けてください:

```
あなたはReact Native (Expo)のエキスパートです。
TypeScriptを使用してください（ただしstrictモードはOFF）。
Expo SDK 52以上をターゲットにしてください。
Expo Routerでナビゲーションを実装してください。
スタイリングにはStyleSheet.createを使用してください（NativeWindは使わない）。
コメントは日本語で書いてください。
変数名・関数名は英語のキャメルケースで命名してください。
UIコンポーネントは関数コンポーネントで実装してください。
エラーメッセージは日本語で説明してください。
```

> **補足**: このルールは `templates/.cursorrules` ファイルにも同じ内容が保存されています。テキストの原本として参照してください。

### 設定前後の違い

| 設定前（Rulesなし） | 設定後（Rulesあり） |
|-------------------|-------------------|
| AIが勝手にJavaScriptで書いたりTypeScriptで書いたりする | 常にTypeScriptで統一される |
| NativeWindやTailwindなど初心者には難しいスタイリングを提案 | StyleSheet.createで統一され、CSS知識不要 |
| コメントが英語で書かれる | コメントが日本語になり読みやすい |
| 毎回「TypeScriptで書いて」と指示する必要がある | 一度設定すれば自動で適用される |

### 参考: ファイルベースのRules設定

プロジェクトのルートに `.cursorrules` ファイルを置く方法もあります（上級者向け）。
研修では使いませんが、今後自走する際に知っておくと便利です。

- **Cursor Settings の Rules**: 全プロジェクト共通で適用される
- **`.cursorrules` ファイル**: そのプロジェクトだけに適用される
- **Claude Code の `CLAUDE.md`**: Claude Code CLI を使う場合に同様の役割を果たす

---

## 3. Agent Mode（エージェントモード）

### 概念

通常のチャットは「質問→回答」の1往復です。
Agent Modeは、AIが**自律的に複数のステップを実行**します。

**営業に例えると**:
- 通常モード = 「この資料のこの部分を直して」と1つずつ指示
- Agent Mode = 「この提案書を完成させて」と言うと、AIが自分で調べ、ファイルを編集し、テストまで実行

### できること

- ファイルの作成・編集を複数回自動実行
- ターミナルコマンドの実行（`npm install`など）
- エラーが出たら自分で修正を試みる
- 必要なパッケージを自動でインストール

### 使い方

1. `Cmd+I`（Composer）を開く
2. 入力欄の左で「Agent」モードを選択（通常は「Normal」や「Edit」）
3. やりたいことを日本語で指示

```
例:
「ログイン画面を作ってください。
メールアドレスとパスワードの入力欄、
ログインボタンを配置し、
Supabase Authで認証してください。
必要なパッケージもインストールしてください。」
```

4. AIが複数ステップを自動実行（途中で確認を求められる場合あり）

### 設定前後の違い

| 通常モード（Normal/Edit） | Agent Mode |
|-------------------------|-----------|
| 1ファイルの編集を提案 | 複数ファイルを自動で編集 |
| パッケージは自分でインストール | `npm install`も自動実行 |
| エラーは自分で対処 | エラーを検出して自動修正を試みる |
| 細かい指示が必要 | 大まかな指示でOK |

### 注意点

- Agent Modeは強力だが、意図しない変更をする場合がある
- 実行前に「何をするか」の確認画面が出るので、必ず内容を確認してから承認
- 研修初期（Day 1-3）は通常モードで基礎を固め、Day 4以降でAgent Modeを活用

---

## 4. MCP（Model Context Protocol）

### 概念

MCPとは、AIに「新しい道具」を追加する仕組みです。

**営業に例えると**:
営業担当に「顧客DBを直接検索できる権限」を渡すようなものです。
MCPを設定すると、AIがSupabaseのデータベースを直接確認したり、
Figmaのデザインを参照したりできるようになります。

### 仕組み（図解）

```
通常のCursor:
  AIは「テキスト」しか理解しない
  → コードを見て推測するだけ

MCP設定後:
  AI ←→ MCP Server ←→ 外部サービス
                        ├── Supabase（DBの中身を確認）
                        ├── GitHub（Issue一覧を取得）
                        └── Figma（デザインを参照）
```

### 研修での利用（参考）

研修初期段階ではMCPの設定は不要です。
ただし、開発に慣れてきた段階（Week 2以降）で、以下のMCPサーバーが役立つ場合があります。

#### 例: Supabase MCP

設定すると、Cursorから直接Supabaseのテーブル構造やデータを確認できるようになります。

```
設定前: 「todosテーブルのカラムは何ですか？」→ Supabaseダッシュボードを開いて確認
設定後: CursorのAIが直接テーブル構造を参照して回答
```

### 設定方法（参考）

1. Cursor Settings → 「MCP」セクション
2. 「Add MCP Server」をクリック
3. サーバー名とコマンドを入力

```json
{
  "mcpServers": {
    "supabase": {
      "command": "npx",
      "args": ["-y", "@supabase/mcp-server"]
    }
  }
}
```

> **研修では**: 講師が必要に応じて設定します。受講者が自分で設定する必要はありません。

### 設定前後の違い

| MCPなし | MCPあり |
|---------|--------|
| AIはコードだけを見て推測 | AIが外部サービスの実データを参照できる |
| DB構造はダッシュボードで手動確認 | AIに聞くだけでDB構造がわかる |
| 情報の行き来が面倒 | AIが直接情報を取得して回答 |

---

## まとめ：4つの設定の関係

```
┌─────────────────────────────────────────────┐
│                  Cursor                      │
│                                              │
│  ┌──────────────────┐                        │
│  │ モデル選択        │ ← どのAIを使うか       │
│  └──────────────────┘                        │
│           ↓                                  │
│  ┌──────────────────┐                        │
│  │ Rules            │ ← AIにどう振る舞うか    │
│  │ (Settings)       │   を事前に指示          │
│  └──────────────────┘                        │
│           ↓                                  │
│  ┌──────────────────┐                        │
│  │ Agent Mode       │ ← AIに自律的に         │
│  │ (Composer)       │   作業させる            │
│  └──────────────────┘                        │
│           ↓                                  │
│  ┌──────────────────┐                        │
│  │ MCP              │ ← AIに外部サービスへの  │
│  │ (外部接続)       │   アクセス権を与える     │
│  └──────────────────┘                        │
└─────────────────────────────────────────────┘
```

### 研修での導入タイミング

| 設定 | いつ導入 | 誰が設定 |
|------|---------|---------|
| モデル選択 | Day 1（概要説明のみ） | 講師が推奨モデルを指定 |
| Rules (Cursor Settings) | Day 1（全員で設定） | 講師が画面共有で案内 |
| Agent Mode | Day 4以降（基礎固め後） | 受講者が自分で切り替え |
| MCP | Week 2以降（参考情報） | 講師が必要に応じて設定 |

---

## 補足: Cursorのコンテキスト機能（@メンション）

AIへの質問時に `@` を使うと、特定の情報をAIに渡せます。

| コマンド | 説明 | 使い方の例 |
|---------|------|-----------|
| `@ファイル名` | 特定のファイルを参照させる | 「@App.tsx のエラーを修正して」 |
| `@codebase` | プロジェクト全体を検索させる | 「@codebase でSupabaseを使っている箇所を探して」 |
| `@web` | Webで最新情報を検索させる | 「@web Expo SDK 52の変更点は？」 |
| `@docs` | 公式ドキュメントを参照させる | 「@docs Expo Routerの使い方」 |

### 使い方

チャット（Cmd+L）やComposer（Cmd+I）で `@` を入力すると候補が表示されます。

```
例: 「@App.tsx と @lib/supabase.ts を見て、
    データの取得部分にエラーハンドリングを追加してください」
```

> **研修では**: Day 2以降、「@ファイル名」の使い方だけ覚えれば十分です。
